# TIL_191109

날짜: Nov 09, 2019
생성일: Nov 09, 2019 4:15 AM

### Summary

- 클리핑 (직방, pygsheet, 다음 환율)
- `*params f'str'` 등 파이썬

### 클리핑

---

> callout style로 복습하기

클리핑의 심화단계를 배웠다.  pygsheet를 사용해서 oauth를 이용하는 것. 복잡한 직방 데이터를 클리핑하는법, 다음 환율 클리핑에서 headers의 값을 이용해서 클리핑하는 법.

1. 먼저 클리핑을 활용하기 전에 robots.txt로 확인을 한다.
2. 개발자 도구에서 가능하면 json을 불러올 수 있는 방법을 확인한다.
3. 파이썬에서 url - request - response 해본다
    1. 된다 → 진행한다.
    2. 안된다 → 헤더를 넣어본다. (refer, 사용자 정보)

일단은 여기까지가 url 방식 클리핑의 전부이다. 이 이후에는 자료 구조를 이해하고 원하는 dataset으로 만드는 과정이다.

- 직방의 경우
    - 검색이 지도 데이터 기반이라서 이후 원하는 데이터를 구하기가 쉽지 않았다.
    - 여담이지만 오랜만에 첫차 시절이 생각났다. 초기 핵심 개발자가 지금은 서현역에서 가게하는 것을 알고 있으려나?
    - 아무튼 클리핑 로직은 문자열 검색 → 위, 경도 탐색 → 이걸 다시 문자열 데이터로 변환 → id를 탐색해서 데이터셋 불러오기
    - 불러온 데이터셋의 데이터 타입 확인하고 정열 할 수 있는 방법 확인 (객체는 ㄴㄴ해)
    - 가장 힘들었던 점은 오류가 없는데 오류가 계속 생기는 점이다. 디버깅을 할 수 없었다. 원인을 모르니 극복이 안된다. 하...

추가 사용을 위해 함수를 만들고 모듈로 변환까지 해봤다.

- pygsheet
    - oauth 를 활용해서 구글 드라이브와 연동했다.
    - 생각보다 쉬웠다. 다만 oauth 개념을 배우는데 조금 시간이 걸린 것 같다.
    - 실제적인 용도는 잘 모르겠다. 차라리 데이터 베이스에 넣는게 좋을 것 같기도 하고... 자동화에 어떻게 써야할지 잘 모르겠다. oauth를 이해하기 위해서 실습한 느낌임.
- 다음 환율
    - 헤더스의 개념을 이해했다. 클리핑 시에 헤더값을 딕셔너리 형태였나? 같이 넣어줘야한다.
    - 실제 백엔드 개발자가 아니면 클리핑 방법을 찾는게 오래걸릴 수 있을 것 같다.

클리핑 재미있다. 조금 어렵지만 좀 더 고급 과정으로 가면 할 수 있는 게 무궁무진할 것 같다. 자동화 까지 빨리 배워보고 싶다는 생각을 했다.

### 파이썬 기초 복습

---

영어를 하기 귀찮아서 해커스 랭크 잘 안했는데, 가장 좋은 기초 문제들을 가지고 있는 사이트인 것 같다. 문제는 input을 혼자 힘으로 풀어내는 것이 버겁고, input 데이터를 이해하고 활용하기 위한 머리가 아직 인 것 같다. 변화하는 데이터를 다룰 수 있다는 점에서 알고 있는 함수를 다양하게 구조화 해서 사용할 수 있어서 장단점이 있는 것 같다.

파이썬을 하면서 f'이것저것' 이게 뭔지 몰랐는데 f'string' 이라는 일종의 print 함수였다. 뭐 정확한 것은 잘 모르고 최고의 장점은 프린트가 빠르고 {}.format 처리를 아주 쉽게 할 수있다는 점이다. 사실 머릿속으로 잘 이해는 안가는 부분이있다. 약점도 발견했는데 {:0.2%} 같은 자릿수를 제한한 문자열 포맷을 못쓴다. 사실 이건 검색을 좀 더 해봐야할 것 같다.

오랜만에 파이썬 달려서 머리가 아프다. 보는 것 쉬워도 만드는 것은 언제나 뼈를 깍는 노력이 필요하다.